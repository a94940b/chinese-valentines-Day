<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-type" content="text/html" charset="UTF-8">
  <title>小冬同学七夕快乐</title>
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="./css/pageA.css">
  <script src="./js/Swipe.js"></script>
  <script src="./js/BoyWalk.js"></script>
</head>
<style type="text/css">
  /*-------- 太阳自转以及动画 --------*/

  #sun {
    background: url("images/sun.png") no-repeat;
    position: absolute;
    z-index: 1;
    top: -30px;
    height: 201px;
    width: 201px;
    right: 40%;
  }

  .rotation {
    -webkit-animation-name: rotation;
    -webkit-animation-duration: 30s;
    -moz-animation-name: rotation;
    -moz-animation-duration: 30s;
  }

  @-webkit-keyframes rotation {
    0% {
      transform: translateX(0) translateY(0);
    }
    100% {
      transform: translateX(-2000px) translateY(400px);
    }
  }

  @-moz-keyframes rotation {
    0% {
      transform: translateX(0) translateY(0);
    }
    100% {
      transform: translateX(-2000px) translateY(400px);
    }
  }
</style>
<script src="lib/jquery-3.3.1.min.js"></script>
<script src="lib/jQueryTransit.js"></script>

<body>
  <div id="content">
    <ul class="content-wrap">
      <!-- 画面1 -->
      <li>
        <div class="a_background">
          <div class="a_background_top"></div>
          <div class="a_background_middle"></div>
          <div class="a_background_bottom"></div>
        </div>
        <div id="sun"></div>
      </li>
      <!-- 画面2 -->
      <li>页面2</li>
      <!-- 画面3 -->
      <li>页面3</li>
    </ul>
    <div id="boy" class="charector"></div>
    <div class="button">
      <button>点击开始动画</button>
    </div>
  </div>
<script type="text/javascript">
    $(function() {
    
        var container = $("#content");
        var swipe = Swipe(container);
        // 页面滚动到指定的位置
        function scrollTo(time, proportionX) {
            var distX = container.width() * proportionX;
            swipe.scrollTo(distX, time);
        }
    
        ////////////////////////////////////////////////////////
        // ================== 动画处理 ====================== //
        ////////////////////////////////////////////////////////
    
        var boy = BoyWalk();
    
    
        // 开始
        $("button:first").click(function() {
    
            // 太阳公转
            $("#sun").addClass('rotation');
    
    
            // 开始第一次走路
            boy.walkTo(2000, 0.2)
                .then(function() {
                    // 第一次走路完成
                    // 开始页面滚动
                    scrollTo(5000, 1);
                }).then(function() {
                    // 第二次走路
                    return boy.walkTo(5000, 0.5);
                });
        });
    })
</script>
</body>

</html>